Here is the complete, consolidated Database Schema for Phase 1 (User Management).This schema handles Login (Social/Phone), Role Selection, Profile Management, KYC, and the Secure "Max 2 Sessions" logic.1. Core Identity (Authentication)These tables handle "Who are you?" regardless of what role you play.Table: users (The Master Record)Column NameTypeNotesuser_idUUID (PK)Central ID used everywhere.emailVARCHARUnique, Nullable (might use phone only).phone_numberVARCHARUnique, Nullable (includes country code).password_hashVARCHARNullable (null for social login users).is_email_verifiedBOOLEANDefault: False.is_phone_verifiedBOOLEANDefault: False.account_statusENUMPENDING_ONBOARDING, ACTIVE, SUSPENDED, BANNED.created_atTIMESTAMPAudit trail.last_login_atTIMESTAMPActivity tracking.Table: social_identities (For Google/Facebook/Apple)Column NameTypeNotesidBIGINT (PK)user_idUUID (FK)Links to users.providerENUMGOOGLE, FACEBOOK.provider_user_idVARCHARThe unique ID sent by Google/FB.emailVARCHAREmail linked to that social account.2. Access Control (Authorization)These tables handle permissions.Table: roles (Static Table)Column NameTypeNotesrole_idINT (PK)role_nameENUMHOST, AGENCY, BRAND, GIFTER, ADMIN.Table: user_roles (Many-to-Many Link)Column NameTypeNotesuser_idUUID (FK)Links to users.role_idINT (FK)Links to roles.3. Domain Profiles (Business Logic)These tables store the specific data for the role the user selected. A user should generally have only one of these.Table: profile_hosts (Creators)Column NameTypeNotesprofile_idBIGINT (PK)user_idUUID (FK)Unique constraint (One host profile per user).display_nameVARCHARPublic name on the app.genderENUMdobDATECritical for Age Verification (18+).bioTEXTprofile_pic_urlVARCHARonboarding_stepINTTracks if they finished the tutorial.Table: profile_agencies (Agencies)Column NameTypeNotesprofile_idBIGINT (PK)user_idUUID (FK)company_nameVARCHARregistration_numberVARCHARBusiness Reg / Tax ID.contact_personVARCHARagency_codeVARCHARUnique code for inviting hosts.Table: profile_brands (Advertisers)Column NameTypeNotesprofile_idBIGINT (PK)user_idUUID (FK)brand_nameVARCHARwebsite_urlVARCHARindustryVARCHARTable: profile_gifters (Spenders)Column NameTypeNotesprofile_idBIGINT (PK)user_idUUID (FK)levelINTGamification level.vip_statusBOOLEAN4. Security & Compliance (The "Professional" Layer)Table: user_sessions (Enforces Max 2 Devices)This is the Stateful JWT table.| Column Name | Type | Notes || :--- | :--- | :--- || session_id | UUID (PK) | Unique ID for the login instance. || user_id | UUID (FK) | Links to users. || refresh_token_hash| VARCHAR | Hashed version of the long-lived token. || device_info | VARCHAR | e.g., "Android 12 - Pixel 6". || ip_address | VARCHAR | For security auditing. || expires_at | TIMESTAMP | When the session naturally dies (7 days). || created_at | TIMESTAMP | Used to find the "Oldest" session to kick out. |Table: kyc_documents (Verification)Column NameTypeNotesdocument_idBIGINT (PK)user_idUUID (FK)document_typeENUMPASSPORT, NATIONAL_ID, PAN, BUSINESS_LICENSE.document_urlVARCHAREncrypted path to S3.statusENUMPENDING, APPROVED, REJECTED.rejection_reasonTEXTFeedback for the user.verified_atTIMESTAMPNext Step for YouYou can now hand this list to your backend team. It covers 11 Tables total.
